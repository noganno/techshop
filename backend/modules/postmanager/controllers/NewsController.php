<?phpnamespace backend\modules\postmanager\controllers;use Yii;use soft\web\SController;use backend\modules\postmanager\models\News;use backend\modules\postmanager\models\search\NewsSearch;/** * NewsController implements the CRUD actions for News model. */class NewsController extends SController{    public function actions()    {        return [            'uploadimage' => [                'class' => 'odilov\cropper\UploadAction',                'url' => "/uploads/news",                'path' => '@frontend/web/uploads/news',                'jpegQuality' => 75,            ]        ];    }    public function actionIndex()    {        $searchModel = new NewsSearch();        $dataProvider = $searchModel->search(Yii::$app->request->queryParams);        return $this->render('index', [            'searchModel' => $searchModel,            'dataProvider' => $dataProvider,        ]);    }    public function actionView($id)    {        return $this->render('view', [            'model' => News::findModel($id),        ]);    }    public function actionCreate()    {        $model = new News();        $model->prepareAttributesForForm();        if ($model->load(Yii::$app->request->post()) ) {            $model->prepareAttributesToSave();            if($model->save()){                return $this->redirect(['view', 'id' => $model->id]);            }        }        return $this->render('create', [            'model' => $model,        ]);    }    public function actionUpdate($id)    {        $model = News::findModel($id);        $model->prepareAttributesForForm();        if ($model->load(Yii::$app->request->post()) ) {            $model->prepareAttributesToSave();            if($model->save()){                return $this->redirect(['view', 'id' => $model->id]);            }        }        return $this->render('update', [            'model' => $model,        ]);    }    public function actionDelete($id)    {        News::findModel($id)->delete();        return $this->redirect(['index']);    }    public function actionUpdateImages($id)    {        $model = News::findModel($id);        $path = Yii::getAlias('@frontend/web');        $oldIndexImage = $path.$model->image_index;        $oldGridImage = $path.$model->image_grid;        $oldDetailImage = $path.$model->image_detail;        if ($model->load(Yii::$app->request->post()) ) {            if($model->save()){                if (is_file($oldIndexImage)){                    unlink($oldIndexImage);                }                  if (is_file($oldGridImage)){                    unlink($oldGridImage);                }                  if (is_file($oldDetailImage)){                    unlink($oldDetailImage);                }                return $this->redirect(['view', 'id' => $model->id]);            }        }        return $this->render('updateImages', [            'model' => $model,        ]);    }}